---
title: Write-up PermX [Easy] - Hack The Box
date: 2024-09-09
categories: [Writeups, Hack The Box]
tags: [writeup, hackthebox, machines, easy, pentesting]
image: /assets/img/hackthebox/machines/permx/permx.png
image_link: false
---

Publicación del write-up de sujeto a las [guías generales](https://help.hackthebox.com/en/articles/5188925-streaming-writeups-walkthrough-guidelines) de Hack The Box.

# Write-up PermX \[Easy\] - Hack The Box 
\\
**Mi perfil de Hack The Box: [julianglez16](https://app.hackthebox.com/users/1084561)**


## Enumeración


### Puertos


![image.png](/assets/img/hackthebox/machines/permx/puertos1.png)


![image.png](/assets/img/hackthebox/machines/permx/puertos2.png)


### Directorios web


![image.png](/assets/img/hackthebox/machines/permx/directorios-web.png)


### Virtual hosts


![image.png](/assets/img/hackthebox/machines/permx/virtual-hosts.png)


### Tecnologías web


![image.png](/assets/img/hackthebox/machines/permx/tecnologias-web1.png)


![image.png](/assets/img/hackthebox/machines/permx/tecnologias-web2.png)


### Funcionalidad web


![image.png](/assets/img/hackthebox/machines/permx/funcionalidad-web1.png)


![image.png](/assets/img/hackthebox/machines/permx/funcionalidad-web2.png)


![image.png](/assets/img/hackthebox/machines/permx/funcionalidad-web3.png)

## Explotación


### Usuario


La versión implementada de Chamilo LMS (v1) es vulnerable a un RCE ([https://pentest-tools.com/vulnerabilities-exploits/chamilo-lms-11124-remote-code-execution_22949](https://pentest-tools.com/vulnerabilities-exploits/chamilo-lms-11124-remote-code-execution_22949)), por lo que se puede explotar con un exploit público [https://github.com/Ziad-Sakr/Chamilo-CVE-2023-4220-Exploit](https://github.com/Ziad-Sakr/Chamilo-CVE-2023-4220-Exploit). El exploit no funciona correctamente, pero queda subido el reverse shell y se puede acceder a él manualmente desde la ruta `/main/inc/lib/javascript/bigupload/files/`, por lo que se obtiene un reverse shell funcional.


![image.png](/assets/img/hackthebox/machines/permx/expl-usuario1.png)


Al enumerar los puertos abiertos, se ve que hay un servidor MySQL corriendo en el puerto `3306`. Buscando en los ficheros de configuración de Chamilo LMS se encuentra el usuario y contraseña desde el que se puede acceder a la BBDD.


![image.png](/assets/img/hackthebox/machines/permx/expl-usuario2.png)


Esa contraseña es la misma que la del usuario `mtz`, por lo que se puede hacer SSH a dicho usuario con esas credenciales.


### Root


El usuario cuenta con permisos de sudo para ejecutar el fichero `/opt/acl.sh`


![image.png](/assets/img/hackthebox/machines/permx/expl-root1.png)


![image.png](/assets/img/hackthebox/machines/permx/expl-root2.png)



Si se crea un symlink al fichero `/etc/passwd` se puede utilizar el script `acl.sh` para eliminar la contraseña del usuario `root` y obtener acceso:


![image.png](/assets/img/hackthebox/machines/permx/expl-root3.png)

